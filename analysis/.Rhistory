setwd(currentDir)
load("gpData_v1.Rda")
catVblList <- c("stimCat", "trialType", "blockType", "memCond", "swProb", "task")
# turn a bunch of 1/0 codings into categorical factors
idx <- match(catVblList,colnames(gpM1))
for (c in idx[!is.na(idx)]){
gpM1[[c]]  <- factor(gpM1[[c]], ordered = TRUE)
}
idx <- match(catVblList,colnames(gpM2))
for (c in idx[!is.na(idx)]){
gpM2[[c]]  <- factor(gpM2[[c]], ordered = TRUE)
}
idx <- match(catVblList,colnames(gpM3))
for (c in idx[!is.na(idx)]){
gpM3[[c]]  <- factor(gpM3[[c]], ordered = TRUE)
}
S=1
gpBasic <- tibble(sbjId = numeric(0), CSPC = numeric(0), ISSP = numeric(0), memHit = numeric(0),
memFA = numeric(0), p1ACC = numeric(0), p2ACC = numeric(0))
gpCondM1 <- tibble()
gpCondM2 <- tibble()
gpCondM3 <- tibble()
gpMemRespCNT <- tibble()
S
rm(mydata, condM)
mydata <- gpM1 %>% filter(sbjId==S)
condM <- mydata %>%
filter(sbjRT > 150, sbjRT <=1000) %>%
group_by(blockType, trialType) %>%
summarise(meanRT = mean(sbjRT, na.rm = TRUE))
condM <- bind_cols(tibble(sbjId=rep(1,4)), condM)
gpCondM1 <- bind_rows(gpCondM1, condM)
CSPC <- condM[[2,"meanRT"]]-condM[[1,"meanRT"]]-(condM[[4,"meanRT"]]-condM[[3,"meanRT"]])
p1ACC <- mean(mydata$sbjACC)
# Phase2, swProb = 20/80 (mostly repeat, mostly switch), trial type = 0/1 (repeat, switch)
rm(mydata, condM)
mydata <- gpM2 %>% filter(sbjId==S)
condM <- mydata %>%
filter(sbjRT > 150, sbjRT <=1000) %>%
group_by(swProb, trialType) %>%
summarise(meanRT = mean(sbjRT, na.rm = TRUE))
condM <- bind_cols(tibble(sbjId=rep(1,4)), condM)
gpCondM2 <- bind_rows(gpCondM1, condM)
ISSP <- condM[[2,"meanRT"]]-condM[[1,"meanRT"]]-(condM[[4,"meanRT"]]-condM[[3,"meanRT"]])
p2ACC <- mean(mydata$sbjACC)
# Phase 3, memory recognition, memCond 1:5 = MC-C, MC-IC, MIC-C, MIC-IC, NEW
# response: 0/1 = NEW/OLD
# sbjResp: 1=new, 4=old
rm(mydata, condM)
mydata <- gpM3 %>% filter(sbjId==S)
mydata[which(mydata$sbjResp ==3|mydata$sbjResp ==4), "sbjmemYN"] <- 1 # prob old, def old
mydata[which(mydata$sbjResp ==1|mydata$sbjResp ==2), "sbjmemYN"] <- 0 # def new, prob new
# calculate memory acc
mydata$sbjACC <- 0
mydata[which(mydata$sbjmemYN == mydata$response), "sbjACC"] <- 1
condM <- mydata %>%
filter(blockType!=99) %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(sbjACC), meanRT = mean(sbjRT, na.rm = TRUE))
condM <- bind_cols(tibble(sbjId = rep(1,4)), condM)
memRespCNT <- mydata %>%
filter(sbjResp!=99) %>%
group_by(response, sbjResp) %>%
summarise(cnt = n())
memRespCNT <- bind_cols(tibble(sbjId = rep(1,8)), memRespCNT)
gpMemRespCNT <- bind_rows(gpMemRespCNT, memRespCNT)
memP <- mydata %>%
group_by(response) %>% # response ==1, get HitRate, response==0, get correct Rejection
summarise(meanRate = mean(sbjACC))
memP
gpBasic
p1ACC
p2ACC
gpBasic[S,] <- c(S, CSPC, ISSP, memP[[2,"meanRate"]], 1-memP[[1, "meanRate"]], p1ACC*100, p2ACC*100)
gpBasic
source('~/.active-rstudio-document')
source('~/YCCProjects/decodeCC/analysis/step2_basicAanalysis.R')
source('~/YCCProjects/decodeCC/analysis/step2_basicAanalysis.R')
condM
# Phase 3, memory recognition, memCond 1:5 = MC-C, MC-IC, MIC-C, MIC-IC, NEW
debugSource('~/YCCProjects/decodeCC/analysis/step2_basicAanalysis.R')
rm(mydata, condM)
mydata <- gpM3 %>% filter(sbjId==S)
mydata[which(mydata$sbjResp ==3|mydata$sbjResp ==4), "sbjmemYN"] <- 1 # prob old, def old
mydata[which(mydata$sbjResp ==1|mydata$sbjResp ==2), "sbjmemYN"] <- 0 # def new, prob new
# calculate memory acc
mydata$sbjACC <- 0
mydata[which(mydata$sbjmemYN == mydata$response), "sbjACC"] <- 1
condM <- mydata %>%
filter(blockType!=99) %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(sbjACC), meanRT = mean(sbjRT, na.rm = TRUE))
condM
rm(mydata, condM)
mydata <- gpM3 %>% filter(sbjId==S)
mydata
mydata[which(mydata$sbjResp ==3|mydata$sbjResp ==4), "sbjmemYN"] <- 1 # prob old, def old
mydata[which(mydata$sbjResp ==1|mydata$sbjResp ==2), "sbjmemYN"] <- 0 # def new, prob new
mydata
mydata$sbjACC <- 0
mydata[which(mydata$sbjmemYN == mydata$response), "sbjACC"] <- 1
condM <- mydata %>%
filter(blockType!=99) %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(sbjACC), meanRT = mean(sbjRT, na.rm = TRUE))
condM
mydata$sbjACC <- 0
mydata[which(mydata$sbjmemYN == mydata$response), "sbjACC"] <- 1
condM <- mydata %>%
filter(blockType!=99) %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(sbjACC), meanRT = mean(sbjRT, na.rm = TRUE))
condM <- bind_cols(tibble(sbjId = rep(1,4)), condM
condM
condM
dim(condM)
dim(condM,1)
dim(condM)[1]
source('~/YCCProjects/decodeCC/analysis/step2_basicAanalysis.R')
S
rm(list=ls())
rm(list=ls())
library(tidyverse)
currentDir <-  getwd()
setwd(currentDir)
load("gpData_v1.Rda")
catVblList <- c("stimCat", "trialType", "blockType", "memCond", "swProb", "task")
# turn a bunch of 1/0 codings into categorical factors
idx <- match(catVblList,colnames(gpM1))
for (c in idx[!is.na(idx)]){
gpM1[[c]]  <- factor(gpM1[[c]], ordered = TRUE)
}
idx <- match(catVblList,colnames(gpM2))
for (c in idx[!is.na(idx)]){
gpM2[[c]]  <- factor(gpM2[[c]], ordered = TRUE)
}
idx <- match(catVblList,colnames(gpM3))
for (c in idx[!is.na(idx)]){
gpM3[[c]]  <- factor(gpM3[[c]], ordered = TRUE)
}
gpBasic <- tibble(sbjId = numeric(0), CSPC = numeric(0), ISSP = numeric(0), memHit = numeric(0),
memFA = numeric(0), p1ACC = numeric(0), p2ACC = numeric(0))
gpCondM1 <- tibble()
gpCondM2 <- tibble()
gpCondM3 <- tibble()
gpMemRespCNT <- tibble()
S=1
# Phase 1, blockType = 0/1 (mostlyC, mostlyIC), trial type = 0/1 (Congruent, Incongruent)
rm(mydata, condM)
mydata <- gpM1 %>% filter(sbjId==S)
condM <- mydata %>%
filter(sbjRT > 150, sbjRT <=1000) %>%
group_by(blockType, trialType) %>%
summarise(meanRT = mean(sbjRT, na.rm = TRUE))
condM <- bind_cols(tibble(sbjId=rep(1,4)), condM)
gpCondM1 <- bind_rows(gpCondM1, condM)
CSPC <- condM[[2,"meanRT"]]-condM[[1,"meanRT"]]-(condM[[4,"meanRT"]]-condM[[3,"meanRT"]])
p1ACC <- mean(mydata$sbjACC)
# Phase2, swProb = 20/80 (mostly repeat, mostly switch), trial type = 0/1 (repeat, switch)
rm(mydata, condM)
mydata <- gpM2 %>% filter(sbjId == S)
condM <- mydata %>%
filter(sbjRT > 150, sbjRT <= 1000) %>%
group_by(swProb, trialType) %>%
summarise(meanRT = mean(sbjRT, na.rm = TRUE))
condM <- bind_cols(tibble(sbjId = rep(1,dim(condM)[1])), condM)
gpCondM2 <- bind_rows(gpCondM1, condM)
ISSP <- condM[[2,"meanRT"]]-condM[[1,"meanRT"]]-(condM[[4,"meanRT"]]-condM[[3,"meanRT"]])
p2ACC <- mean(mydata$sbjACC)
# Phase 3, memory recognition, memCond 1:5 = MC-C, MC-IC, MIC-C, MIC-IC, NEW
# response: 0/1 = NEW/OLD
# sbjResp: 1=new, 4=old
rm(mydata, condM)
mydata <- gpM3 %>% filter(sbjId==S)
mydata[which(mydata$sbjResp ==3|mydata$sbjResp ==4), "sbjmemYN"] <- 1 # prob old, def old
mydata[which(mydata$sbjResp ==1|mydata$sbjResp ==2), "sbjmemYN"] <- 0 # def new, prob new
# calculate memory acc
mydata$sbjACC <- 0
mydata[which(mydata$sbjmemYN == mydata$response), "sbjACC"] <- 1
condM <- mydata %>%
filter(blockType!=99) %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(sbjACC), meanRT = mean(sbjRT, na.rm = TRUE))
condM <- bind_cols(tibble(sbjId = rep(1,dim(condM)[1])), condM)
memRespCNT <- mydata %>%
filter(sbjResp!=99) %>%
group_by(response, sbjResp) %>%
summarise(cnt = n())
memRespCNT <- bind_cols(tibble(sbjId = rep(1,dim(memRespCNT)[1])), memRespCNT)
gpMemRespCNT <- bind_rows(gpMemRespCNT, memRespCNT)
memP <- mydata %>%
group_by(response) %>% # response ==1, get HitRate, response==0, get correct Rejection
summarise(meanRate = mean(sbjACC))
source('~/YCCProjects/decodeCC/analysis/step2_basicAanalysis.R')
View(gpM1)
View(gpMemRespCNT)
source('~/YCCProjects/decodeCC/analysis/step2_basicAanalysis.R')
View(gpMemRespCNT)
summary(mydata$sbjResp)
source('~/YCCProjects/decodeCC/analysis/step2_basicAanalysis.R')
View(gpMemRespCNT)
tt <- tibble(response=c(rep(0,4), rep(1,4)), sbjResp=c(1,2,3,4,1,2,3,4))
tt
right_join(gpMemRespCNT,tt)
tt2 <- right_join(gpMemRespCNT,tt)
View(tt2)
debugSource('~/YCCProjects/decodeCC/analysis/step2_basicAanalysis.R')
condM
memRespCNT <- mydata %>%
filter(sbjResp <= 4 & sbjResp >= 1) %>%
group_by(response, sbjResp) %>%
summarise(cnt = n())
memRespCNT
memRespCNT
memRespCNT
tt
tt <- tibble(response=c(rep(0,4), rep(1,4)), sbjResp=c(1,2,3,4,1,2,3,4))
tt
right_join(memRespCNT, tt)
source('~/YCCProjects/decodeCC/analysis/step2_basicAanalysis.R')
View(gpMemRespCNT)
13*8
View(gpM1)
View(gpCondM1)
View(gpCondM2)
View(gpCondM3)
source('~/YCCProjects/decodeCC/analysis/step2_basicAanalysis.R')
View(gpCondM1)
View(gpCondM1)
View(gpCondM2)
View(gpCondM3)
source('~/YCCProjects/decodeCC/analysis/step2_basicAanalysis.R')
View(gpCondM1)
View(gpBasic)
source('~/YCCProjects/decodeCC/analysis/step1_gatherData.R')
source('~/YCCProjects/decodeCC/analysis/step2_basicAanalysis.R')
View(gpBasic)
summary(gpBasic)
View(gpCondM2)
View(gpCondM2)
View(gpCondM3)
gpCondM3 %>% group_by(blockType, trialType) %>% summarise(meanACC = mean(meanACC))
library(ggplot2)
gpCondM3 %>% ggplot(mapping = aes(x=blockType, y=meanACC, color=trialType)) + geom_point()
gpCondM3 %>% group_by(blockType, trialType) %>% summarise(meanACC = mean(meanACC)) %>% ggplot(mapping = aes(x=blockType, y=meanACC, color=trialType)) + geom_point()
gpCondM3 %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC)) %>%
ggplot(mapping = aes(x=blockType, y=meanACC, line=trialType)) + geom_point()
gpCondM3 %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC)) %>% geom_line()
ggplot(mapping = aes(x=blockType, y=meanACC, color=trialType)) + geom_line()
gpCondM3 %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC)) %>% geom_line()
ggplot(mapping = aes(x=blockType, y=meanACC, color=trialType)) + geom_point(stat='identity')
gpCondM3 %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC)) %>%
ggplot(mapping = aes(x=blockType, y=meanACC, color=trialType)) + geom_line()
gpCondM3 %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC)) %>%
ggplot(mapping = aes(x=blockType, y=meanACC)) + geom_line()
gpCondM3 %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC)) %>%
ggplot(mapping = aes(blockType, meanACC, color = trialType)) + geom_line()
gpCondM3 %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC)) %>%
gpCondM3
gpCondM3 %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC))
gpCondM3 %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC)) %>%
ggplot(aes(blockType, meanACC, colour = trialType)) + geom_line()
gpCondM3 %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC)) %>%
ggplot(aes(blockType, meanACC, colours = trialType)) + geom_line()
tt <- gpCondM3 %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC))
tt
tt
tt %>% ggplot(aes(blockType, meanACC, colour = trialType)) + geom_line()+ labs(colour="trialType")
n
tt %>% ggplot(aes(blockType, meanACC, colour = trialType)) + geom_line()
tt %>% ggplot(aes(blockType, meanACC, colour = trialType)) + geom_pint()
tt %>% ggplot(aes(blockType, meanACC, colour = trialType)) + geom_point()
tt %>% ggplot(aes(blockType, meanACC, colour = trialType)) + geom_point(line=trialType)
tt %>% ggplot(aes(blockType, meanACC, colour = trialType)) + geom_point()+ geom_line()
tt %>% ggplot(aes(blockType, meanACC, colour = trialType)) + geom_point()
tt %>% ggplot(aes(blockType, meanACC) + geom_point(aes(color=trialType))
tt %>% ggplot(aes(blockType, meanACC) + geom_point(aes(color=trialType)) + geom_line()
dev.off()
gpCondM3 %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC)) %>%
ggplot(aes(blockType, meanACC)) + geom_point(colour=trialType)
gpCondM3 %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC))
tt <- gpCondM3 %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC))
tt
gpCondM3 %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC)) %>%
ggplot() + geom_point(aes(blockType, meanACC, olour = trialType))
gpCondM3 %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC)) %>%
ggplot() + geom_point(aes(blockType, meanACC, colour = trialType))
gpCondM3 %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC)) %>%
ggplot() + geom_point(aes(blockType, meanACC, colour = trialType)) + geom_line()
tt <- gpCondM3 %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC))
p3Plot <- ggplot()
p3Plot <- p3Plot + geom_point(data = tt, aes(blockType, meanACC, colour = trialType))
tt <- gpCondM3 %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC))
p3Plot <- ggplot()
p3Plot <- p3Plot + geom_point(data = tt, aes(blockType, meanACC, colour = trialType))
p3Plot
p3Plot <- ggplot()
p3Plot <- p3Plot + geom_point(data = tt, aes(blockType, meanACC, colour = trialType))
p3Plot <- p3Plot + geom_line(data = tt, aes(x=blockType, y = meanACC, size =trialType))
p3Plot
dev.off()
p3Plot <- ggplot()
p3Plot <- p3Plot + geom_point(data = tt, aes(blockType, meanACC, colour = trialType))
p3Plot <- p3Plot + geom_line(data = tt, aes(x=blockType, y = meanACC, color =trialType))
p3Plot
p3Plot <- p3Plot + geom_line(data = tt, aes(x=blockType, y = meanACC, color =trialType), size=1)
p3Plot
help(geom_path)
tt <- gpCondM3 %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC))
p3Plot <- ggplot()
p3Plot <- p3Plot + geom_point(data = tt, aes(blockType, meanACC, colour = trialType))
p3Plot <- p3Plot + geom_line(data = tt, aes(x=blockType, y = meanACC, group =trialType), size=1)
p3Plot
p3Plot <- ggplot()
p3Plot <- p3Plot + geom_line(data = tt, aes(x=blockType, y = meanACC, group =trialType), size=1)
p3Plot
p3Plot <- ggplot()
p3Plot <- p3Plot + geom_bar(data = tt, aes(x=blockType, y = meanACC, group =trialType))
p3Plot
tt <- gpCondM3 %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC))
tt
as.numeric((levels(tt$trialType))
)
tt$trialType
tt
tt$trialType <- numeric(tt$trialType)
levels(tt$trialType)
tt <- gpCondM3 %>%
filter(trialType!=99)
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC))
tt <- gpCondM3 %>%
filter(trialType!=99)
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC))
tt
tt <- gpCondM3 %>%
filter(trialType!=99) %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC))
tt
level(tt$trialType)
levels(tt$trialType)
gpCondM3
levels(gpCondM3)
levels(gpCondM3$trialType)
tt <- gpCondM3 %>%
filter(trialType!=99) %>%
tt
tt <- gpCondM3 %>%
filter(trialType!=99)
tt
levels(tt$trialType)
tt <- gpCondM3 %>%
filter(trialType!=99) %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC))
tt <- gpCondM3 %>%
filter(trialType!=99)
tt$trialType <- factor(tt$trialType)
tt
levels(tt$trialType)
as.numeric(levels(tt$trialType))
tt$trialType <- as.numeric(levels(tt$trialType))
tt
tt %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC))
p3Plot <- ggplot()
p3Plot <- p3Plot + geom_line(data = tt, aes(x=blockType, y = meanACC, group =trialType), size=1)
p3Plot
dev.off()
tt$blockType
tt <- gpCondM3 %>%
filter(blockType!=99)
tt$blockType <- factor(tt$blockType)
tt$blockType
tt <- gpCondM3 %>%
filter(blockType!=99)
tt$blockType <- factor(tt$blockType)
tt$blockType <- as.numeric(levels(tt$blockType))
tt %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC)) %>%
ggplot() + geom_line(x = blockType, y = meanACC, group = trialType)
tt
tt %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC))
tt %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC))
gpM3
tt <- gpCondM3 %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC))
tt
tt$blockType
levels(tt$blockType)
as.numeric(levels(tt$blockType))
tt$blockType <-  as.numeric(levels(tt$blockType))
tt
tt
tt$blockType <-  as.factor(tt$blockType)
tt
tt$blockType <-  as.numeric(levels(tt$blockType))
tt
tt$blockType <-  as.factor(tt$blockType)
tt
tt$blockType
tt <- gpCondM3 %>%
filter(blockType!=99) %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC))
tt$blockType
tt$blockType <-  as.factor(tt$blockType)
tt$blockType
gpCondM3
View(gpCondM3)
tt <- gpCondM3 %>%
filter(blockType!=99) %>%
factor(blockType)  %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC))
tt <- gpCondM3 %>%
filter(blockType!=99) %>%
factor(.$blockType)  %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC))
tt <- gpCondM3 %>%
filter(blockType!=99) %>%
factor(.$blockType)
tt
tt <- gpCondM3 %>%
filter(blockType!=99)
tt$blockType <-  factor(tt$blockType)
tt
tt %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC))
tt$blockType
tt$blockType <-  as.numeric(levels(tt$blockType))
tt
tt
tt <- tt %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC))
tt$blockType <-  as.numeric(levels(tt$blockType))
tt
tt %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC))
tt <- gpCondM3 %>%
filter(blockType!=99)
tt$blockType <-  factor(tt$blockType)   # to drop 99 in the factor level.. re-apply factor after subsetting
tt
ttt <- tt %>%
group_by(blockType, trialType) %>%
summarise(meanACC = mean(meanACC))
ttt
ttt$blockType <-  as.numeric(levels(ttt$blockType))
ttt
ggplot(data = ttt) + geom_line(x = blockType, y = meanACC, group = trialType)
ggplot(data = ttt) + geom_line(blockType, meanACC, group = trialType)
ttt %>%
ggplot()
ttt %>%
ggplot + geom_line(aes(x=blockType, y=meanACC, group=trialType))
rm(list=ls())
quit()
